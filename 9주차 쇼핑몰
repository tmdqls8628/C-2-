#include <stdio.h>
#include <string.h>

#define MAX 5

typedef struct {
    int id;         
    char name[20];
    int price;     
    int stock;    
    int sold;       
    int income;     
} Item;

int main() {
    Item items[MAX];
    int n = 0;  
    int menu;

    while (1) {
        printf("\n===== 쇼핑몰 재고 관리 =====\n");
        printf("1. 입고\n2. 판매\n3. 개별조회\n4. 전체조회\n5. 종료\n");
        printf("메뉴 선택 : ");
        scanf("%d", &menu);

        if (menu == 1) { 
            if (n >= MAX) {
                printf("더 이상 상품을 추가할 수 없습니다.\n");
                continue;
            }

            int id, qty, price;
            char name[20];
            printf("상품 ID : ");
            scanf("%d", &id);

            int found = -1;
            for (int i = 0; i < n; i++) {
                if (items[i].id == id)
                    found = i;
            }

            printf("상품명 : ");
            scanf("%s", name);
            printf("입고 수량 : ");
            scanf("%d", &qty);
            printf("가격 : ");
            scanf("%d", &price);

            if (found == -1) { 
                items[n].id = id;
                strcpy(items[n].name, name);
                items[n].price = price;
                items[n].stock = qty;
                items[n].sold = 0;
                items[n].income = 0;
                n++;
                printf("신규 상품 등록 완료!\n");
            } else { 
                items[found].stock += qty;
                items[found].price = price;
                printf("기존 상품 재입고 완료!\n");
            }

        } else if (menu == 2) {  
            int id, qty;
            printf("판매할 상품 ID : ");
            scanf("%d", &id);

            int found = -1;
            for (int i = 0; i < n; i++) {
                if (items[i].id == id)
                    found = i;
            }

            if (found == -1) {
                printf("존재하지 않는 상품입니다.\n");
                continue;
            }

            printf("판매 수량 : ");
            scanf("%d", &qty);

            if (items[found].stock < qty) {
                printf("재고 부족! 현재 재고: %d개\n", items[found].stock);
                continue;
            }

            items[found].stock -= qty;
            items[found].sold += qty;
            items[found].income += qty * items[found].price;
            printf("[%s] 상품이 %d개 판매되었습니다!\n", items[found].name, qty);

        } else if (menu == 3) {  
            int id;
            printf("조회할 상품 ID : ");
            scanf("%d", &id);

            int found = -1;
            for (int i = 0; i < n; i++) {
                if (items[i].id == id)
                    found = i;
            }

            if (found == -1) {
                printf("해당 상품을 찾을 수 없습니다.\n");
            } else {
                printf("\n--------------------------------------------------\n");
                printf("ID:%d | 이름:%s | 가격:%d | 재고:%d | 판매:%d | 매출:%d\n",
                       items[found].id, items[found].name, items[found].price,
                       items[found].stock, items[found].sold, items[found].income);
                printf("--------------------------------------------------\n");
            }

        } else if (menu == 4) {  
            if (n == 0) {
                printf("등록된 상품이 없습니다.\n");
                continue;
            }

            printf("\n===== 전체 상품 목록 =====\n");
            for (int i = 0; i < n; i++) {
                printf("ID:%d | 이름:%s | 가격:%d | 재고:%d | 판매:%d | 매출:%d\n",
                       items[i].id, items[i].name, items[i].price,
                       items[i].stock, items[i].sold, items[i].income);
            }

        } else if (menu == 5) {  
            printf("프로그램을 종료합니다.\n");
            break;

        } else {
            printf("잘못된 입력입니다. 다시 선택하세요.\n");
        }
    }

    return 0;
}
